\documentclass[10pt,a4paper]{article}

\input{macros/AEDmacros}
\usepackage[intHoriz, sinLU]{macros/caratula} 
\usepackage{listings}
\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{xcolor}
\usepackage{inconsolata}

\lstset{
    language=bash,
    basicstyle=\ttfamily\small,
    numberstyle=\footnotesize,
    numbers=left,
    backgroundcolor=\color{gray!10},
    frame=single,
    tabsize=2,
    rulecolor=\color{black!30},
    title=\lstname,
    escapeinside={\%*}{*)},
    breaklines=true,
    breakatwhitespace=true,
    framextopmargin=2pt,
    framexbottommargin=2pt,
    inputencoding=utf8,
    morecomment=[f][\color{purple}][0]{\#},
    morecomment=[f][\color{red}][0]{\#\#},
    extendedchars=true,
    emph={TAD, obs, tupla, real, float, bool, int, nat, seq, conj, dict, struct, string, forall, sum, exists, char, pred, aux, proc, requiere, asegura, inout, out},
    emphstyle=\textbf,
    literate = { % Support for additional characters
        {á}{{\'a}}1  {é}{{\'e}}1  {í}{{\'i}}1 {ó}{{\'o}}1  {ú}{{\'u}}1
        {Á}{{\'A}}1  {É}{{\'E}}1  {Í}{{\'I}}1 {Ó}{{\'O}}1  {Ú}{{\'U}}1
        {à}{{\`a}}1  {è}{{\`e}}1  {ì}{{\`i}}1 {ò}{{\`o}}1  {ù}{{\`u}}1
        {À}{{\`A}}1  {È}{{\`E}}1  {Ì}{{\`I}}1 {Ò}{{\`O}}1  {Ù}{{\`U}}1
        {ä}{{\"a}}1  {ë}{{\"e}}1  {ï}{{\"i}}1 {ö}{{\"o}}1  {ü}{{\"u}}1
        {Ä}{{\"A}}1  {Ë}{{\"E}}1  {Ï}{{\"I}}1 {Ö}{{\"O}}1  {Ü}{{\"U}}1
        {â}{{\^a}}1  {ê}{{\^e}}1  {î}{{\^i}}1 {ô}{{\^o}}1  {û}{{\^u}}1
        {Â}{{\^A}}1  {Ê}{{\^E}}1  {Î}{{\^I}}1 {Ô}{{\^O}}1  {Û}{{\^U}}1
        {œ}{{\oe}}1  {Œ}{{\OE}}1  {æ}{{\ae}}1 {Æ}{{\AE}}1  {ß}{{\ss}}1
        {ẞ}{{\SS}}1  {ç}{{\c{c}}}1 {Ç}{{\c{C}}}1 {ø}{{\o}}1  {Ø}{{\O}}1
        {å}{{\aa}}1  {Å}{{\AA}}1  {ã}{{\~a}}1  {õ}{{\~o}}1 {Ã}{{\~A}}1
        {Õ}{{\~O}}1  {ñ}{{\~n}}1  {Ñ}{{\~N}}1  {¿}{{?`}}1  {¡}{{!`}}1
        {°}{{\textdegree}}1 {º}{{\textordmasculine}}1 {ª}{{\textordfeminine}}1
        {£}{{\pounds}}1  {©}{{\copyright}}1  {®}{{\textregistered}}1
        {«}{{\guillemotleft}}1  {»}{{\guillemotright}}1  {Ð}{{\DH}}1  {ð}{{\dh}}1
        {Ý}{{\'Y}}1    {ý}{{\'y}}1    {Þ}{{\TH}}1    {þ}{{\th}}1    {Ă}{{\u{A}}}1
        {ă}{{\u{a}}}1  {Ą}{{\k{A}}}1  {ą}{{\k{a}}}1  {Ć}{{\'C}}1    {ć}{{\'c}}1
        {Č}{{\v{C}}}1  {č}{{\v{c}}}1  {Ď}{{\v{D}}}1  {ď}{{\v{d}}}1  {Đ}{{\DJ}}1
        {đ}{{\dj}}1    {Ė}{{\.{E}}}1  {ė}{{\.{e}}}1  {Ę}{{\k{E}}}1  {ę}{{\k{e}}}1
        {Ě}{{\v{E}}}1  {ě}{{\v{e}}}1  {Ğ}{{\u{G}}}1  {ğ}{{\u{g}}}1  {Ĩ}{{\~I}}1
        {ĩ}{{\~\i}}1   {Į}{{\k{I}}}1  {į}{{\k{i}}}1  {İ}{{\.{I}}}1  {ı}{{\i}}1
        {Ĺ}{{\'L}}1    {ĺ}{{\'l}}1    {Ľ}{{\v{L}}}1  {ľ}{{\v{l}}}1  {Ł}{{\L{}}}1
        {ł}{{\l{}}}1   {Ń}{{\'N}}1    {ń}{{\'n}}1    {Ň}{{\v{N}}}1  {ň}{{\v{n}}}1
        {Ő}{{\H{O}}}1  {ő}{{\H{o}}}1  {Ŕ}{{\'{R}}}1  {ŕ}{{\'{r}}}1  {Ř}{{\v{R}}}1
        {ř}{{\v{r}}}1  {Ś}{{\'S}}1    {ś}{{\'s}}1   {Ş}{{\c{S}}}1   {ş}{{\c{s}}}1
        {Š}{{\v{S}}}1  {š}{{\v{s}}}1  {Ť}{{\v{T}}}1  {ť}{{\v{t}}}1  {Ũ}{{\~U}}1
        {ũ}{{\~u}}1    {Ū}{{\={U}}}1  {ū}{{\={u}}}1  {Ů}{{\r{U}}}1  {ů}{{\r{u}}}1
        {Ű}{{\H{U}}}1  {ű}{{\H{u}}}1  {Ų}{{\k{U}}}1  {ų}{{\k{u}}}1  {Ź}{{\'Z}}1
        {ź}{{\'z}}1    {Ż}{{\.Z}}1    {ż}{{\.z}}1    {Ž}{{\v{Z}}}1
    }
}


\titulo{Algoritmo y Estructura de Datos II}
\subtitulo{Práctica 4}

\begin{document}

%\maketitle

\section{Ejercicio 1}
Especificar en forma completa el TAD \textit{NumeroRacional} que incluya al menos las operaciones aritméticas básicas (suma, resta, división, multiplicación).
\begin{lstlisting}
    TAD numeroRacional 
        obs a : float   o real?
        obs b : float
    
        proc suma (in a: float, in b: float): float
            asegura res= a+b

        proc resta (in a: float, in b: float): float
            asegura res= a-b
         
        proc división (in a: float, in b: float): float
            asegura if b=0 then res=0 else res= a/b

        proc multiplicación (in a: float, in b: float): float
            asegura res= a*b

\end{lstlisting}

\section{Ejercicio 2}
Especificar TADs para las siguientes figuras geométricas. Tiene que contener las operaciones: rotar, trasladar y escalar y una más propuesta por mi. 
\subsection{Rectángulo (2D)}
\begin{lstlisting}
 
    TAD Rectangulo {
        obs altura: real
        obs base: real
        obs angulo: real
        obs centro: tupla <real,real>

        proc crearRectangulo (in altura: real, in base: real, in angulo, in centro): rectangulo {
            requiere: {altura >= 0 && base >= 0}
            asegura: {res.altura = altura && res.base = base && res.angulo = angulo && res.centro == centro}
        }

        proc asignarAngulo (inout r: rectangulo, in angulo: real): rectangulo {
            requiere: {r = old(r) && 0 <= angulo < 2pi}
            asegura: {r.angulo = angulo}
            asegura: {r.base = old(r).base && r.altura = old(r).altura}
            asegura: {r.angulo = old(r).angulo && r.centro = old(r).centro}
        }

        proc rotar (inout r: rectangulo, in angulo: real): rectangulo {
            requiere: {r = old(r) && 0<= old(r).angulo + angulo <2pi}
            asegura: {r.angulo = old(r).angulo + angulo}
            asegura: {r.centro = old(r).centro }
            asegura: {r.base = old(r).base && r.altura = old(r).altura}
        }

        proc trasladar (inout r: rectangulo, in p: punto): rectangulo {
            requiere: {r = old(r)}
            asegura: {r.centro = punto}
            asegura: {r.base = n * old(r).base && r.altura = n * old(r).altura && r.angulo = old(r).angulo}
        }

        proc trasladar2 (inout r: Rectangulo, in diferencia: tupla <real, real>): rectangulo {
            requiere: {r == old(r)}
            asegura: {r.centro == old(r).centro + diferencia}
            asegura: {r.base == old(r).base && r.altura == old(r).altura && r.angulo == old(r).angulo}
        }

        proc escalar (inout r: Rectangulo, in n: real): Rectangulo {
            requiere: {r == old(r)}
            asegura: {r.altura == n * old(r).altura && r.base == n * old(r).base}
            asegura: {r.angulo == old(r).angulo && r.centro == old(r).centro}
        }
    
        proc esCuadrado (in r: rectangulo): Bool {
            requiere: {True}
            asegura: {res = true <--> r.altura = r.base}
        }
    } 
          
\end{lstlisting}
\subsection{Esfera (3D)}
\begin{lstlisting}
    TAD esfera{
        obs radio: real
        obs centro: tupla <real, real, real>
        obs rotación: tupla <real, real, real>

        proc crearEsfera (in centro: trupla <real, real, real>, in radio: real): esfera {
            requiere: {radio >= 0}
            asegura: {res.radio = radio && res.centro = centro}
        }

        proc rotar (inout e: esfera, in coordenadas: tupla <real, real, real>): esfera {
            requiere: {e = old(e)}
            requiere: {0 <= e.rotación + coordenadas < 2pi}
            asegura: {e.rotación = old(e).rotacion + coordenadas}
            asegura: {e.radio = old(e).radio}
            asegura: {e.centro = old(e).centro}
        }

        proc trasladar (inout e: esfera, in p: tupla <real, real, real>): esfera {
            requiere: {e = old(e)}
            asegura: {e.centro = p}
            asegura: {e.radio = old(e).radio}
            asegura: {e.rotacion = old(e).rotacion}
        }

        proc trasladar2 (inout e: Esfera, in diferencia: tupla<real,real,real>): Esfera {
            requiere: {e == old(e)}
            asegura: {e.centro == old(e).centro + diferencia}
            asegura: {e.radio == old(e).radio}
            asegura: {e.rotacion == old(e).rotacion}
        }

        proc escalar (inout e: esfera, in n: real): esfera {
            requiere: {e = old(e)}
            asegura: {e.centro = old(e).centro}
            asegura: {e.radio = n * old(e).radio}
            asegura: {e.rotacion = old(e).rotacion}
        }

        proc areaDeEsfera (in radio: real): real {
            requiere: {radio >= 0}
            asegura: {res = 4 * pi * radio ** 2}
        }

    }
\end{lstlisting}

\section{Ejercicio 3}
Especifique el TAD \textit{DobleCola<T>}, en el que los elementos pueden insertarse al principio o al final y se eliminan por el medio. Ejemplo:
\begin{lstlisting}
    c := DobleCola<int>.NuevaDobleCola()

    encolarAdelante(c, 1)           // c = <1>
    encolarAdelante(c, 2)           // c = <2, 1>
    encolarAtrás(c, 3)              // c = <2, 1, 3>
    
    desencolar(c)                   // devuelve 1, c = <2, 3>
    desencolar(c)                   // devuelve 2, c = <3>
    desencolar(c)                   // devuelve 3, c = <>
\end{lstlisting}

\begin{lstlisting}
    TAD DobleCola <T> {
        obs q: seq <T>

        proc crearDobleCola (inout c: DobleCola): c {
            requiere {}
            asegura: {}
        }

        aux primerElemento (elems: seq <T>):
            if |elems| = {} then 

        proc encolarAdelante (inout s: seq <T>, in e: T) {
            requiere: {s = old(s)}   -- comparar el estado previo (s0) con el estado post
            asegura: {s.q = concat (<e>, old(s).q)}
        }

        proc encolarAtrás (inout s: seq <T>, in e: T) {
            requiere: {s = old(s)}  
            asegura: {s.q = concat (ols(s).q, <e>)}
        }

        proc desencolar (inout s: seq <T>): T {
            requiere: {s = old(s)}
            requiere: {s.q =/ {}}
            asegura: {s.q = subseq (old(s).q , 1, |old(s).q|)}
            asegura: {res = old(s)[medioDeLaSeq]}
        }

        aux medioDeLaSeq (s: seq <T>): T
            if s mod 2 = 0 then () else 

    }
\end{lstlisting}

\section{Ejercicio 4}
Especifique el TAD \textit{DiccionarioConHistoria}. El mismo guarda, para cada clave, todos los valores que se asociaron con la misma a lo largo del tiempo (en orden).

\begin{lstlisting}
    TAD DiccionarioConHistoria {
        obs
    }
\end{lstlisting}
\end{document}